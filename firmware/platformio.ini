; GATEMATE ESP32 Firmware - PlatformIO Configuration
; Production-ready IoT Gate Control System

[env:esp32]
platform = espressif32
board = esp32dev
framework = arduino
monitor_speed = 115200
upload_speed = 921600

; Library dependencies
lib_deps = 
    bblanchon/ArduinoJson@^7.0.0
    knolleary/PubSubClient@^2.8
    https://github.com/tzapu/WiFiManager.git
    ayushsharma82/ElegantOTA@^3.1.0

; Build flags for production
build_flags = 
    -DCORE_DEBUG_LEVEL=0
    -DBOARD_HAS_PSRAM
    -DARDUINO_EVENT_RUNNING_CORE=1
    -DCONFIG_ASYNC_TCP_RUNNING_CORE=1

; Partition scheme for OTA updates
board_build.partitions = min_spiffs.csv

; LittleFS for configuration storage
board_build.filesystem = littlefs

[env:esp32-debug]
extends = env:esp32
build_type = debug
build_flags = 
    -DCORE_DEBUG_LEVEL=5
    -DLOG_LOCAL_LEVEL=ESP_LOG_VERBOSE
